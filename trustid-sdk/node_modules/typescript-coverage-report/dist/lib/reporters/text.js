"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
exports.__esModule = true;
var terminal_table_1 = __importDefault(require("terminal-table"));
require("colors");
var coverageTable = new terminal_table_1["default"]({
    leftPadding: 1,
    rightPadding: 1,
    borderStyle: 2
});
var calculatePercantage = function (correct, total) {
    if (total === 0) {
        return 100;
    }
    return (correct * 100) / total;
};
var calculatePercantageWithString = function (correct, total) {
    return calculatePercantage(correct, total).toFixed(2) + "%";
};
exports.generate = function (_a, threshold) {
    var fileCounts = _a.fileCounts, percentage = _a.percentage, total = _a.total, covered = _a.covered, uncovered = _a.uncovered;
    var row = 1;
    var headers = [
        "filenames" + (" (" + fileCounts.size + ")").gray,
        "percent" + (" (" + percentage.toFixed(2) + "%)").gray,
        "total" + (" (" + total + ")").gray,
        "covered" + (" (" + covered + ")").gray,
        "uncovered" + (" (" + uncovered + ")").gray
    ];
    coverageTable.push(headers, headers.map(function () { return "---".gray; }));
    coverageTable.attrRange({ column: [1, 5] }, {
        align: "right"
    });
    fileCounts.forEach(function (_a, filename) {
        var totalCount = _a.totalCount, correctCount = _a.correctCount;
        row++;
        coverageTable.push([
            filename,
            calculatePercantageWithString(correctCount, totalCount),
            totalCount,
            correctCount,
            totalCount - correctCount
        ]);
        coverageTable.attrRange({ row: [row] }, {
            color: Math.floor(calculatePercantage(correctCount, totalCount)) >=
                threshold
                ? "green"
                : "red"
        });
    });
    return "" + coverageTable;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvcmVwb3J0ZXJzL3RleHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxrRUFBbUM7QUFFbkMsa0JBQWdCO0FBRWhCLElBQU0sYUFBYSxHQUFHLElBQUksMkJBQUssQ0FBQztJQUM5QixXQUFXLEVBQUUsQ0FBQztJQUNkLFlBQVksRUFBRSxDQUFDO0lBQ2YsV0FBVyxFQUFFLENBQUM7Q0FDZixDQUFDLENBQUM7QUFFSCxJQUFNLG1CQUFtQixHQUFHLFVBQUMsT0FBZSxFQUFFLEtBQWE7SUFDekQsSUFBSSxLQUFLLEtBQUssQ0FBQyxFQUFFO1FBQ2YsT0FBTyxHQUFHLENBQUM7S0FDWjtJQUVELE9BQU8sQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO0FBQ2pDLENBQUMsQ0FBQztBQUVGLElBQU0sNkJBQTZCLEdBQUcsVUFDcEMsT0FBZSxFQUNmLEtBQWE7SUFFYixPQUFVLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQUcsQ0FBQztBQUM5RCxDQUFDLENBQUM7QUFFVyxRQUFBLFFBQVEsR0FBRyxVQUN0QixFQUFtRSxFQUNuRSxTQUFpQjtRQURmLDBCQUFVLEVBQUUsMEJBQVUsRUFBRSxnQkFBSyxFQUFFLG9CQUFPLEVBQUUsd0JBQVM7SUFHbkQsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQ1osSUFBTSxPQUFPLEdBQUc7UUFDZCxXQUFXLEdBQUcsQ0FBQSxPQUFLLFVBQVUsQ0FBQyxJQUFJLE1BQUcsQ0FBQSxDQUFDLElBQUk7UUFDMUMsU0FBUyxHQUFHLENBQUEsT0FBSyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFJLENBQUEsQ0FBQyxJQUFJO1FBQy9DLE9BQU8sR0FBRyxDQUFBLE9BQUssS0FBSyxNQUFHLENBQUEsQ0FBQyxJQUFJO1FBQzVCLFNBQVMsR0FBRyxDQUFBLE9BQUssT0FBTyxNQUFHLENBQUEsQ0FBQyxJQUFJO1FBQ2hDLFdBQVcsR0FBRyxDQUFBLE9BQUssU0FBUyxNQUFHLENBQUEsQ0FBQyxJQUFJO0tBQ3JDLENBQUM7SUFFRixhQUFhLENBQUMsSUFBSSxDQUNoQixPQUFPLEVBQ1AsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFNLE9BQUEsS0FBSyxDQUFDLElBQUksRUFBVixDQUFVLENBQUMsQ0FDOUIsQ0FBQztJQUVGLGFBQWEsQ0FBQyxTQUFTLENBQ3JCLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQ2xCO1FBQ0UsS0FBSyxFQUFFLE9BQU87S0FDZixDQUNGLENBQUM7SUFFRixVQUFVLENBQUMsT0FBTyxDQUNoQixVQUNFLEVBRytDLEVBQy9DLFFBQWdCO1lBSGQsMEJBQVUsRUFDViw4QkFBWTtRQUlkLEdBQUcsRUFBRSxDQUFDO1FBRU4sYUFBYSxDQUFDLElBQUksQ0FBQztZQUNqQixRQUFRO1lBQ1IsNkJBQTZCLENBQUMsWUFBWSxFQUFFLFVBQVUsQ0FBQztZQUN2RCxVQUFVO1lBQ1YsWUFBWTtZQUNaLFVBQVUsR0FBRyxZQUFZO1NBQzFCLENBQUMsQ0FBQztRQUVILGFBQWEsQ0FBQyxTQUFTLENBQ3JCLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFDZDtZQUNFLEtBQUssRUFDSCxJQUFJLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLFlBQVksRUFBRSxVQUFVLENBQUMsQ0FBQztnQkFDekQsU0FBUztnQkFDUCxDQUFDLENBQUMsT0FBTztnQkFDVCxDQUFDLENBQUMsS0FBSztTQUNaLENBQ0YsQ0FBQztJQUNKLENBQUMsQ0FDRixDQUFDO0lBRUYsT0FBTyxFQUFFLEdBQUcsYUFBYSxDQUFDO0FBQzVCLENBQUMsQ0FBQyJ9